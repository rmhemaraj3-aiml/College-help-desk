/*
A speed-improved perlin and simplex noise algorithms for 2D.
Based on example code by Stefan Gustavson (stegu@itn.liu.se).
Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
Better rank ordering method by Stefan Gustavson in 2012.
This code was placed in the public domain by its original author,
Stefan Gustavson. You may use it as you see fit, but
attribution is appreciated.
*/
(function(global){var module=global.noise={},G2=(3-Math.sqrt(3))/6,Grad=function(a,b,c){this.x=a,this.y=b,this.z=c};Grad.prototype.dot2=function(a,b){return this.x*a+this.y*b},Grad.prototype.dot3=function(a,b,c){return this.x*a+this.y*b+this.z*c};var grad3=[new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)],p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],perm=new Array(512),gradP=new Array(512);module.seed=function(a){a>0&&a<1?Math.random=function(){return a}:a=Math.random();for(var b=0,c=new Array(256),d=0;d<256;d++)c[d]=d;for(;b<256;){var d=Math.floor(255*Math.random());if(d in c){p[b]=c[d];for(var e in c)c[e]==p[b]&&delete c[e];b++}}for(d=0;d<256;d++)perm[d]=perm[d+256]=p[d],gradP[d]=gradP[d+256]=grad3[perm[d]%12]};module.seed(0);module.simplex2=function(a,b){var c,d,e=(a+b)*.3660254037844386,f=Math.floor(a+e),e=Math.floor(b+e),g=(f+e)*G2,h=a-(f-g),g=b-(e-g);h>g?(c=1,d=0):(c=0,d=1);var i=h-c+G2,j=g-d+G2,k=h-1+2*G2,l=g-1+2*G2,f=f&255,e=e&255,h=.5-h*h-g*g;h<0?h=0:g=gradP[f+perm[e]],h*=h,h*=h,h*=g.dot2(h,g);i=.5-i*i-j*j;i<0?i=0:j=gradP[f+c+perm[e+d]],i*=i,i*=i,i*=j.dot2(i,j);k=.5-k*k-l*l;k<0?k=0:f=gradP[f+1+perm[e+1]],k*=k,k*=k,k*=f.dot2(k,l);return 70*(h+i+k)};module.simplex3=function(a,b,c){var d,e,f,g,h,i,j,k,l,m=(a+b+c)/3,n=Math.floor(a+m),o=Math.floor(b+m),p=Math.floor(c+m),m=(n+o+p)/6,q=a-(n-m),r=b-(o-m),s=c-(p-m);q>=r&&q>=s?d=1==g=h=1:(r>q&&r>=s?d=i=k=1==e:f=j=l=1==g);h=q-d+1/6;i=r-e+1/6;j=s-f+1/6;k=q-g+1/3;l=r-h+1/3;m=s-i+1/3;var t=q-.5+3/6,u=r-.5+3/6,v=s-.5+3/6,n=n&255,o=o&255,p=p&255,q=.6-q*q-r*r-s*s;q<0?q=0:r=gradP[n+perm[o+perm[p]]],q*=q,q*=q,q*=r.dot3(q,r,s);h=.6-h*h-i*i-j*j;h<0?h=0:i=gradP[n+d+perm[o+e+perm[p+f]]],h*=h,h*=h,h*=i.dot3(h,i,j);k=.6-k*k-l*l-m*m;k<0?k=0:l=gradP[n+g+perm[o+h+perm[p+i]]],k*=k,k*=k,k*=l.dot3(k,l,m);t=.6-t*t-u*u-v*v;t<0?t=0:n=gradP[n+1+perm[o+1+perm[p+1]]],t*=t,t*=t,t*=n.dot3(t,u,v);return 32*(q+h+k+t)};module.perlin2=function(a,b){var c=Math.floor(a),d=Math.floor(b),e=a-c,f=b-d,a=c&255,b=d&255,c=gradP[a+perm[b]].dot2(e,f),d=gradP[a+1+perm[b]].dot2(e-1,f),g=gradP[a+perm[b+1]].dot2(e,f-1),a=gradP[a+1+perm[b+1]].dot2(e-1,f-1),e=e*e*e*(10-15*e+6*e*e),b=f*f*f*(10-15*f+6*f*f);return(1-b)*this.lerp(e,c,d)+b*this.lerp(e,g,a)};module.perlin3=function(a,b,c){var d=Math.floor(a),e=Math.floor(b),f=Math.floor(c),g=a-d,h=b-e,i=c-f,a=d&255,b=e&255,c=f&255,d=gradP[a+perm[b+perm[c]]].dot3(g,h,i),e=gradP[a+1+perm[b+perm[c]]].dot3(g-1,h,i),j=gradP[a+perm[b+1+perm[c]]].dot3(g,h-1,i),k=gradP[a+1+perm[b+1+perm[c]]].dot3(g-1,h-1,i),l=gradP[a+perm[b+perm[c+1]]].dot3(g,h,i-1),m=gradP[a+1+perm[b+perm[c+1]]].dot3.call(gradP[a+1+perm[b+perm[c+1]]],g-1,h,i-1),n=gradP[a+perm[b+1+perm[c+1]]].dot3(g,h-1,i-1),a=gradP[a+1+perm[b+1+perm[c+1]]].dot3(g-1,h-1,i-1),g=g*g*g*(10-15*g+6*g*g),h=h*h*h*(10-15*h+6*h*h),c=i*i*i*(10-15*i+6*i*i);return(1-c)*this.lerp(h,this.lerp(g,d,e),this.lerp(g,j,k))+(c*this.lerp(h,this.lerp(g,l,m),this.lerp(g,n,a)))/2};module.lerp=function(a,b,c){return b+(a*(c-b))}})(this);